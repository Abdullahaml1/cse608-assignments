@startuml
[*] --> Offline

Offline --> Active: Open game

Active --> Offline: Close game

Active --> StagePlaying: Press Start



state StagePlaying {

[*] --> GameStageStart
GameStageStart --> PlayingWithStageMaterials: Interacting with the game

PlayingWithStageMaterials --> BeginPuzzle: Reacheing puzzle

BeginPuzzle --> SolvingPuzzle: answer the puzzle
SolvingPuzzle --> SolvingPuzzle: wrong answer
SolvingPuzzle --> PlayingWithStageMaterials: answer puzzle correctly
SolvingPuzzle --> GameStageStart: exeeds trials
SolvingPuzzle --> FinishStage: passing all puzzles
FinishStage -->GameStageStart: new stage
FinishStage -->[*]: Exit
}
StagePlaying --> Active: Pause game

StagePlaying --> CompleteGame: Complete all stages

StagePlaying --> CompleteGame: complete stages
CompleteGame --> [*]: upload results to database
@enduml
